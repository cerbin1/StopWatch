<!DOCTYPE html>
<html lang="pl">
<head>
    <title>Stopwatch</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
</head>
<body>
<div class="container">
    <div id="timer" class="buttons">00:00:00</div>
    <div class="navbar">
        <ul>
            <li id="startPause" onclick="toggleStopwatch()">Start</li>
            <li id="reset" onclick="resetStopwatch()">Reset</li>
            <li id="lap" onclick="displayLap()">Lap</li>
            <li id="clear" class="clearLapsButton" onclick="clearLaps()">Clear laps</li>
        </ul>
    </div>

    <div class="center" id="outputLaps"></div>

    <div class="backButton"><a href="index.html">Back</a></div>
</div>
<script>
    var running = false;
    var time = 0;
    var numberOfLap = 0;
    var milliseconds = 0;
    var seconds = 0;
    var minutes = 0;
    var interval;
    var startTime;
    var timePaused = 0;

    function toggleStopwatch() {
        if (running) {
            timePaused = Date.now() - startTime;
            running = false;
            clearInterval(interval);
            document.getElementById("startPause").innerHTML = "Resume";
        }
        else {
            running = true;
            startTime = Date.now() - timePaused;
            runStopwatch();
            document.getElementById("startPause").innerHTML = "Pause";
        }
    }

    function addAdditionalZeroIfNeeded(timeUnit) {
        return ((timeUnit < 10) ? "0" + timeUnit : timeUnit);
    }


    function runStopwatch() {
        if (running) {
            interval = setInterval(function () {
                var timePassed = Date.now() - startTime;
                milliseconds = timePassed % 1000;
                seconds = Math.floor(timePassed / 1000) % 60;
                minutes = Math.floor(timePassed / 1000 / 60);
                document.getElementById("timer").innerHTML =
                    addAdditionalZeroIfNeeded(minutes)
                    + ":" + addAdditionalZeroIfNeeded(seconds)
                    + ":" + addAdditionalZeroIfNeeded(milliseconds);
            }, 10);
        }
    }

    function resetStopwatch() {
        time = 0;
        milliseconds = 0;
        seconds = 0;
        minutes = 0;
        clearInterval(interval);
        running = false;
        document.getElementById("startPause").innerHTML = "Start";
        document.getElementById("timer").innerHTML = "00:00:00";
    }

    function displayLap() {
        numberOfLap++;
        var lap = "Number of lap: " + numberOfLap + " time: " + minutes + ":" + seconds + ":0" + milliseconds / 10 + "\n";
        document.getElementById("outputLaps").innerHTML += lap + "</br>";
    }

    function clearLaps() {
        numberOfLap = 0;
        document.getElementById("outputLaps").innerHTML = "";
    }
</script>
</body>
</html>